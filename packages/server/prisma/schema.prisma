// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Extension {
  id            String          @id @default(uuid())
  name          String
  description   String
  enable        Boolean
  UserExtension UserExtension[]
}

model User {
  id            String              @id @default(uuid())
  userName      String
  extensions    UserExtension[]
  ExtensionItem UserExtensionItem[]
  Widget        UserWidget[]
}

model UserExtension {
  id             String              @id @default(uuid())
  extensionId    String
  extension      Extension           @relation(fields: [extensionId], references: [id])
  userId         String
  User           User?               @relation(fields: [userId], references: [id])
  name           String
  description    String
  meta           String
  extensionItems UserExtensionItem[]
  Widget         UserWidget[]
}

model UserExtensionItem {
  id          String        @id @default(uuid())
  userId      String
  user        User          @relation(fields: [userId], references: [id])
  extensionId String
  Extension   UserExtension @relation(fields: [extensionId], references: [id])
  data        String
  Widget      UserWidget[]
}

model UserWidget {
  id              String            @id @default(uuid())
  extensionId     String
  extension       UserExtension     @relation(fields: [extensionId], references: [id])
  extensionItemId String
  extensionItem   UserExtensionItem @relation(fields: [extensionItemId], references: [id])
  userId          String
  user            User              @relation(fields: [userId], references: [id])
  x               Int
  y               Int
  width           Int
  height          Int
}
