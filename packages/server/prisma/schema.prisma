// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Extension {
  id            String          @id @default(uuid())
  name          String
  description   String
  enable        Boolean
  UserExtension UserExtension[]
}

model User {
  id                 String              @id @default(uuid())
  email              String              @unique
  password           String
  UserExtensions     UserExtension[]
  UserExtensionItems UserExtensionItem[]
  UserWidgets        UserWidget[]
}

model UserExtension {
  id                 String              @id @default(uuid())
  extensionId        String
  Extension          Extension           @relation(fields: [extensionId], references: [id])
  userId             String
  User               User                @relation(fields: [userId], references: [id])
  meta               String
  UserExtensionItems UserExtensionItem[]
  UserWidgets        UserWidget[]
}

model UserExtensionItem {
  id            String        @id @default(uuid())
  userId        String
  User          User          @relation(fields: [userId], references: [id])
  extensionId   String
  UserExtension UserExtension @relation(fields: [extensionId], references: [id])
  data          String
  UserWidgets   UserWidget[]
}

model UserWidget {
  id                 String            @id @default(uuid())
  extensionId        String
  UserExtension      UserExtension     @relation(fields: [extensionId], references: [id])
  extensionItemId    String
  UserExtensionItems UserExtensionItem @relation(fields: [extensionItemId], references: [id])
  userId             String
  User               User              @relation(fields: [userId], references: [id])
  x                  Int
  y                  Int
  width              Int
  height             Int
}
